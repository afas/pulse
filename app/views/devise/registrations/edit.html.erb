<div class="content-normal-width editor">
  <h1><%= t("devise.registrations.edit.title") %></h1>

  <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {:method => :put}) do |f| %>
      <%= devise_error_messages! %>

      <div class="field">
        <%= f.label t("devise.sessions.email") %>
        <%= f.email_field :email, :autofocus => true %>
      </div>

      <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
          <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
      <% end %>

      <div class="field">
        <%= f.label t("devise.sessions.password") %>
        <%= f.password_field :password, :autocomplete => "off" %>
        <i><%= t("devise.registrations.edit.leave_blank") %></i>
      </div>

      <div class="field">
        <%= f.label t("devise.sessions.password_confirmation") %>
        <%= f.password_field :password_confirmation %>
      </div>

      <div class="field">
        <%= f.label t("devise.registrations.edit.current_passwors") %>
        <%= f.password_field :current_password %>
        <i><%= t("devise.registrations.edit.we_need") %></i>
      </div>

      <div class="field">
        <%= f.label t("devise.registrations.edit.name") %>
        <%= f.text_field :name %>
      </div>

      <div class="field">
        <%= f.label t("devise.registrations.edit.surname") %>
        <%= f.text_field :surname %>
      </div>

      <div class="field">
        <%= f.label t("devise.registrations.edit.role") %>
        <%= f.collection_select(:role, Role.collection(current_user.editor?), :code, :name) %>
      </div>

      <div class="field">
        <%= f.label t("devise.registrations.edit.company_id") %>
        <%= f.text_field :company_id %>
      </div>

      <div class="field">
        <%= f.label t("devise.registrations.edit.region") %>
        <%= f.collection_select(:region, Region.collection, :code, :name, :selected => 44) %>
      </div>

      <div class="field">
        <%= f.label t("devise.registrations.edit.about") %>
        <%= f.text_area :about %>
      </div>

      <div class="actions">
        <%= f.submit t("devise.actions.update") %>
      </div>
  <% end %>

  <% if current_user.role == 3 %>
      <h3><%= t("devise.registrations.edit.cancel_account") %></h3>
      <%= button_to "Cancel my account", registration_path(resource_name), :data => {:confirm => "Are you sure?"}, :method => :delete %>
  <% end %>

</div>